{"ast":null,"code":"import _objectSpread from\"/Users/william/Career/fullstack-open/part3/phonebook/phonebook-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/william/Career/fullstack-open/part3/phonebook/phonebook-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import Persons from'./Persons';import PersonForm from'./PersonForm';import Filter from'./Filter';import Notification from'./Notification';import phonebookService from'../services/phonebook';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),searchPattern=_useState8[0],setSearchPattern=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),displayMessage=_useState10[0],setDisplayMessage=_useState10[1];var hook=function hook(){phonebookService.getAll().then(function(initialPersons){setPersons(initialPersons);});};useEffect(hook,[]);var cleanupAdd=function cleanupAdd(message,className){setNewName('');setNewNumber('');setDisplayMessage({message:message,className:className});setTimeout(function(){return setDisplayMessage(null);},5000);};var addPerson=function addPerson(event){event.preventDefault();var foundPerson=persons.find(function(p){return p.name.toUpperCase()===newName.toUpperCase();});if(!foundPerson){var personObject={name:newName,number:newNumber};phonebookService.create(personObject).then(function(returnedPerson){setPersons(persons.concat(returnedPerson));});cleanupAdd(\"\".concat(newName,\" has been added to the phonebook.\"),'success');}else if(window.confirm(\"\".concat(foundPerson.name,\" is already in the phonebook. Replace the old number?\"))){var _personObject=_objectSpread(_objectSpread({},foundPerson),{},{number:newNumber});phonebookService.update(_personObject.id,_personObject).then(function(returnedPerson){setPersons(persons.map(function(p){return p.id!==_personObject.id?p:returnedPerson;}));}).catch(function(error){cleanupAdd(\"\".concat(foundPerson.name,\"'s information has been deleted.\"),'error');});cleanupAdd(\"\".concat(foundPerson.name,\"'s number has been updated in the phonebook.\"),'success');}};var handleNameChange=function handleNameChange(event){return setNewName(event.target.value);};var handleNumberChange=function handleNumberChange(event){return setNewNumber(event.target.value);};var handleFilterChange=function handleFilterChange(event){return setSearchPattern(event.target.value);};var handleDeleteOf=function handleDeleteOf(id){if(window.confirm(\"Delete \".concat(id,\"?\"))){phonebookService.remove(id);setPersons(persons.filter(function(p){return p.id!==id;}));}};var formProps={addPerson:addPerson,newName:newName,newNumber:newNumber,handleNameChange:handleNameChange,handleNumberChange:handleNumberChange};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Notification,_objectSpread({},displayMessage)),/*#__PURE__*/_jsx(Filter,{value:searchPattern,onChange:handleFilterChange}),/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),/*#__PURE__*/_jsx(PersonForm,_objectSpread({},formProps)),/*#__PURE__*/_jsx(\"h2\",{children:\"Numbers\"}),/*#__PURE__*/_jsx(Persons,{persons:persons.filter(function(person){return person.name.toUpperCase().includes(searchPattern.toUpperCase());}),handleDeleteOf:handleDeleteOf})]});};export default App;","map":{"version":3,"names":["useState","useEffect","Persons","PersonForm","Filter","Notification","phonebookService","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","persons","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","searchPattern","setSearchPattern","_useState9","_useState10","displayMessage","setDisplayMessage","hook","getAll","then","initialPersons","cleanupAdd","message","className","setTimeout","addPerson","event","preventDefault","foundPerson","find","p","name","toUpperCase","personObject","number","create","returnedPerson","concat","window","confirm","_objectSpread","update","id","map","catch","error","handleNameChange","target","value","handleNumberChange","handleFilterChange","handleDeleteOf","remove","filter","formProps","children","onChange","person","includes"],"sources":["/Users/william/Career/fullstack-open/part3/phonebook/phonebook-frontend/src/components/App.js"],"sourcesContent":["\nimport { useState, useEffect } from 'react'\nimport Persons from './Persons'\nimport PersonForm from './PersonForm'\nimport Filter from './Filter'\nimport Notification from './Notification'\nimport phonebookService from '../services/phonebook'\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [searchPattern, setSearchPattern] = useState('')\n  const [displayMessage, setDisplayMessage] = useState({})\n  const hook = () => {\n    phonebookService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n      })\n  }\n  useEffect(hook, [])\n  const cleanupAdd = (message, className) => {\n    setNewName('')\n    setNewNumber('')\n    setDisplayMessage({message, className})\n    setTimeout(() => setDisplayMessage(null), 5000)\n  }\n  const addPerson = (event) => {\n    event.preventDefault()\n    let foundPerson = persons.find(p => p.name.toUpperCase() === newName.toUpperCase())\n    if (!foundPerson) {\n      const personObject = {\n        name: newName,\n        number: newNumber,\n      }\n      phonebookService\n        .create(personObject)\n        .then(returnedPerson => {\n          setPersons(persons.concat(returnedPerson))\n        })\n      cleanupAdd(`${newName} has been added to the phonebook.`, 'success')\n      \n    } else if (window.confirm(`${foundPerson.name} is already in the phonebook. Replace the old number?`)) {\n      const personObject = { ...foundPerson, number: newNumber }\n      phonebookService\n        .update(personObject.id, personObject)\n        .then(returnedPerson => {\n          setPersons(persons.map(p => p.id !== personObject.id ? p : returnedPerson))\n        })\n        .catch(error => {\n          cleanupAdd(`${foundPerson.name}'s information has been deleted.`, 'error')\n        })\n      cleanupAdd(`${foundPerson.name}'s number has been updated in the phonebook.`, 'success')\n    }\n  }\n\n  const handleNameChange = event => setNewName(event.target.value)\n  const handleNumberChange = event => setNewNumber(event.target.value)\n  const handleFilterChange = event => setSearchPattern(event.target.value)\n  const handleDeleteOf = id => {\n    if (window.confirm(`Delete ${id}?`)) {\n      phonebookService.remove(id)\n      setPersons(persons.filter(p => p.id !== id))\n    }\n  }\n  const formProps = {\n    addPerson: addPerson,\n    newName: newName,\n    newNumber: newNumber,\n    handleNameChange: handleNameChange,\n    handleNumberChange: handleNumberChange,\n  }\n  return (\n    <div>\n      <Notification {...displayMessage}/>\n      <Filter value={searchPattern} onChange={handleFilterChange} />\n      <h2>Phonebook</h2>\n      <PersonForm {...formProps} />\n      <h2>Numbers</h2>\n      <Persons\n        persons={persons.filter(person => person.name.toUpperCase().includes(searchPattern.toUpperCase()))}\n        handleDeleteOf={handleDeleteOf}\n      />\n    </div>\n  )\n}\n\n\n\nexport default App"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}